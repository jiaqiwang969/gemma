<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒŠè®¶åº¦é©±åŠ¨å¸§é€‰æ‹© - å¯è§†åŒ–éªŒè¯</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .video-section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .video-section h2 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #00d4ff;
        }

        video {
            width: 100%;
            border-radius: 12px;
            background: #000;
        }

        .chart-section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .chart-section h2 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #7b2ff7;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .current-time {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin-top: 15px;
            color: #00d4ff;
        }

        .current-surprise {
            text-align: center;
            font-size: 18px;
            margin-top: 5px;
        }

        .frames-section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }

        .frames-section h2 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #ffd700;
        }

        .frames-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
        }

        .frame-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .frame-card:hover {
            transform: translateY(-5px);
            border-color: #00d4ff;
        }

        .frame-card.active {
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0,212,255,0.3);
        }

        .frame-card.selected {
            border-color: #7b2ff7;
            background: rgba(123, 47, 247, 0.2);
        }

        .frame-card img {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .frame-card .time {
            font-size: 14px;
            color: #888;
        }

        .frame-card .surprise {
            font-size: 18px;
            font-weight: bold;
            margin-top: 5px;
        }

        .frame-card .surprise.high {
            color: #ff4757;
        }

        .frame-card .surprise.medium {
            color: #ffa502;
        }

        .frame-card .surprise.low {
            color: #2ed573;
        }

        .frame-card .label {
            font-size: 11px;
            margin-top: 5px;
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
        }

        .frame-card .label.key {
            background: rgba(123, 47, 247, 0.3);
            color: #b794f6;
        }

        .frame-card .label.event {
            background: rgba(255, 71, 87, 0.3);
            color: #ff6b7a;
        }

        .stats-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-card .label {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }

        .comparison-section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .comparison-section h2 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #2ed573;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .comparison-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .comparison-card h3 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #888;
        }

        .comparison-card .result {
            font-size: 24px;
            font-weight: bold;
            color: #2ed573;
        }

        .comparison-card .detail {
            font-size: 13px;
            color: #666;
            margin-top: 10px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            font-size: 13px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-dot.selected {
            background: #7b2ff7;
        }

        .legend-dot.normal {
            background: #444;
        }

        .insight-box {
            background: linear-gradient(135deg, rgba(123, 47, 247, 0.2), rgba(0, 212, 255, 0.2));
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(123, 47, 247, 0.3);
        }

        .insight-box h3 {
            font-size: 14px;
            color: #b794f6;
            margin-bottom: 10px;
        }

        .insight-box p {
            font-size: 14px;
            color: #aaa;
            line-height: 1.6;
        }

        .insight-box .quote {
            font-style: italic;
            color: #00d4ff;
            margin-top: 10px;
            padding-left: 15px;
            border-left: 3px solid #7b2ff7;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æƒŠè®¶åº¦é©±åŠ¨å¸§é€‰æ‹©éªŒè¯</h1>
        <p class="subtitle">Cambrian-S å¯å‘çš„ V-JEPA2 + Gemma 3n åä½œæœºåˆ¶</p>

        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <div class="stats-section">
            <div class="stat-card">
                <div class="value">0.7547</div>
                <div class="label">æœ€é«˜æƒŠè®¶åº¦ (å¸§4)</div>
            </div>
            <div class="stat-card">
                <div class="value">0.4887</div>
                <div class="label">å¹³å‡æƒŠè®¶åº¦</div>
            </div>
            <div class="stat-card">
                <div class="value">2</div>
                <div class="label">é€‰ä¸­å¸§æ•°</div>
            </div>
            <div class="stat-card">
                <div class="value">60%</div>
                <div class="label">æ•ˆç‡æå‡</div>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <div class="video-section">
                <h2>ğŸ“¹ åŸå§‹è§†é¢‘</h2>
                <video id="video" controls>
                    <source src="../../data/test-video/è¯†åˆ«ç¬”è®°æœ¬ç”µè„‘å°æ•°.mp4" type="video/mp4">
                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
                </video>
                <div class="current-time">å½“å‰æ—¶é—´: <span id="timeDisplay">0.00s</span></div>
                <div class="current-surprise">æƒŠè®¶åº¦: <span id="surpriseDisplay">0.0000</span></div>
            </div>

            <div class="chart-section">
                <h2>ğŸ“ˆ æƒŠè®¶åº¦æ›²çº¿</h2>
                <div class="chart-container">
                    <canvas id="surpriseChart"></canvas>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-dot selected"></div>
                        <span>é€‰ä¸­å¸§ (å¸§1, å¸§4)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot normal"></div>
                        <span>æœªé€‰ä¸­å¸§</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å…³é”®å¸§å±•ç¤º -->
        <div class="frames-section">
            <h2>ğŸï¸ å…³é”®å¸§ä¸æƒŠè®¶åº¦åˆ†æ</h2>
            <div class="frames-grid">
                <div class="frame-card selected" data-time="0" onclick="seekTo(0)">
                    <img src="../../data/test-video/keyframes/frame_01_0.0s.jpg" alt="å¸§1">
                    <div class="time">0.0s</div>
                    <div class="surprise low">S = 0.0000</div>
                    <div class="label key">é¦–å¸§ (å¿…é€‰)</div>
                </div>
                <div class="frame-card" data-time="2" onclick="seekTo(2)">
                    <img src="../../data/test-video/keyframes/frame_02_2.0s.jpg" alt="å¸§2">
                    <div class="time">2.0s</div>
                    <div class="surprise medium">S = 0.3741</div>
                    <div class="label event">äº‹ä»¶è¾¹ç•Œ</div>
                </div>
                <div class="frame-card" data-time="4" onclick="seekTo(4)">
                    <img src="../../data/test-video/keyframes/frame_03_4.0s.jpg" alt="å¸§3">
                    <div class="time">4.0s</div>
                    <div class="surprise high">S = 0.6247</div>
                    <div class="label event">äº‹ä»¶è¾¹ç•Œ</div>
                </div>
                <div class="frame-card selected" data-time="6" onclick="seekTo(6)">
                    <img src="../../data/test-video/keyframes/frame_04_6.0s.jpg" alt="å¸§4">
                    <div class="time">6.0s</div>
                    <div class="surprise high">S = 0.7547</div>
                    <div class="label event">æœ€é«˜æƒŠè®¶åº¦!</div>
                </div>
                <div class="frame-card" data-time="8" onclick="seekTo(8)">
                    <img src="../../data/test-video/keyframes/frame_05_8.0s.jpg" alt="å¸§5">
                    <div class="time">8.0s</div>
                    <div class="surprise high">S = 0.6899</div>
                    <div class="label event">äº‹ä»¶è¾¹ç•Œ</div>
                </div>
            </div>
        </div>

        <!-- å¯¹æ¯”ç»“æœ -->
        <div class="comparison-section">
            <h2>ğŸ¯ è¯†åˆ«ç»“æœå¯¹æ¯”</h2>
            <div class="comparison-grid">
                <div class="comparison-card">
                    <h3>æ–¹æ¡ˆ A: å…¨éƒ¨ 5 å¸§</h3>
                    <div class="result">âœ“ è¯†åˆ«åˆ° 2 å°ç¬”è®°æœ¬</div>
                    <div class="detail">
                        â€¢ MacBook Pro (æ˜¾ç¤º Google æœç´¢)<br>
                        â€¢ Dell ç¬”è®°æœ¬ (æ˜¾ç¤ºçº¢è‰²ç»ˆç«¯ç•Œé¢)
                    </div>
                </div>
                <div class="comparison-card">
                    <h3>æ–¹æ¡ˆ B: æƒŠè®¶åº¦é€‰æ‹© 2 å¸§</h3>
                    <div class="result">âœ“ è¯†åˆ«åˆ° 2 å°ç¬”è®°æœ¬</div>
                    <div class="detail">
                        â€¢ MacBook Pro (æ˜¾ç¤º Google/åœ°å›¾)<br>
                        â€¢ Dell ç¬”è®°æœ¬ (æ˜¾ç¤ºç»ˆç«¯çª—å£)<br>
                        <strong style="color: #7b2ff7;">èŠ‚çœ 60% è¾“å…¥ï¼Œç›¸åŒå‡†ç¡®ç‡!</strong>
                    </div>
                </div>
            </div>

            <div class="insight-box">
                <h3>ğŸ’¡ Cambrian-S æ ¸å¿ƒæ´å¯Ÿ</h3>
                <p>
                    å¸§4 è·å¾—æœ€é«˜æƒŠè®¶åº¦ (0.7547)ï¼Œæ­£å¥½å¯¹åº” Dell ç¬”è®°æœ¬é¦–æ¬¡å‡ºç°çš„æ—¶åˆ»ã€‚
                    è¿™è¯æ˜äº†"é¢„æµ‹è¯¯å·®"èƒ½å¤Ÿæœ‰æ•ˆæ•æ‰è§†é¢‘ä¸­çš„å…³é”®å˜åŒ–ç‚¹ã€‚
                </p>
                <p class="quote">
                    "äººç±»ä¸ä¼šä¿ç•™æ¯ä¸€ä¸ªè§†è§‰ç»†èŠ‚ï¼Œè€Œæ˜¯å­¦ä¹ ç”Ÿæˆè¿‡ç¨‹ï¼Œç”¨é¢„æµ‹è¯¯å·®æ¥å®šä¹‰ä»€ä¹ˆæ˜¯é‡è¦çš„"
                </p>
            </div>
        </div>
    </div>

    <script>
        // æƒŠè®¶åº¦æ•°æ®
        const surpriseData = {
            times: [0, 2, 4, 6, 8],
            scores: [0.0000, 0.3741, 0.6247, 0.7547, 0.6899],
            selected: [true, false, false, true, false]
        };

        // åˆ›å»ºå›¾è¡¨
        const ctx = document.getElementById('surpriseChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: surpriseData.times.map(t => t + 's'),
                datasets: [{
                    label: 'æƒŠè®¶åº¦',
                    data: surpriseData.scores,
                    borderColor: '#00d4ff',
                    backgroundColor: 'rgba(0, 212, 255, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointRadius: surpriseData.selected.map(s => s ? 12 : 6),
                    pointBackgroundColor: surpriseData.selected.map(s => s ? '#7b2ff7' : '#00d4ff'),
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointHoverRadius: 15
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 1,
                        grid: {
                            color: 'rgba(255,255,255,0.1)'
                        },
                        ticks: {
                            color: '#888'
                        },
                        title: {
                            display: true,
                            text: 'æƒŠè®¶åº¦',
                            color: '#888'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255,255,255,0.1)'
                        },
                        ticks: {
                            color: '#888'
                        },
                        title: {
                            display: true,
                            text: 'æ—¶é—´',
                            color: '#888'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    annotation: {
                        annotations: {
                            threshold: {
                                type: 'line',
                                yMin: 0.15,
                                yMax: 0.15,
                                borderColor: 'rgba(255, 71, 87, 0.5)',
                                borderWidth: 2,
                                borderDash: [5, 5],
                                label: {
                                    display: true,
                                    content: 'äº‹ä»¶é˜ˆå€¼',
                                    position: 'end'
                                }
                            }
                        }
                    }
                }
            }
        });

        // è§†é¢‘æ—¶é—´æ›´æ–°
        const video = document.getElementById('video');
        const timeDisplay = document.getElementById('timeDisplay');
        const surpriseDisplay = document.getElementById('surpriseDisplay');
        const frameCards = document.querySelectorAll('.frame-card');

        video.addEventListener('timeupdate', function() {
            const currentTime = video.currentTime;
            timeDisplay.textContent = currentTime.toFixed(2) + 's';

            // æ’å€¼è®¡ç®—å½“å‰æƒŠè®¶åº¦
            let surprise = 0;
            for (let i = 0; i < surpriseData.times.length - 1; i++) {
                if (currentTime >= surpriseData.times[i] && currentTime <= surpriseData.times[i + 1]) {
                    const t = (currentTime - surpriseData.times[i]) / (surpriseData.times[i + 1] - surpriseData.times[i]);
                    surprise = surpriseData.scores[i] + t * (surpriseData.scores[i + 1] - surpriseData.scores[i]);
                    break;
                }
            }
            if (currentTime > surpriseData.times[surpriseData.times.length - 1]) {
                surprise = surpriseData.scores[surpriseData.scores.length - 1];
            }

            surpriseDisplay.textContent = surprise.toFixed(4);

            // è®¾ç½®é¢œè‰²
            if (surprise > 0.5) {
                surpriseDisplay.style.color = '#ff4757';
            } else if (surprise > 0.2) {
                surpriseDisplay.style.color = '#ffa502';
            } else {
                surpriseDisplay.style.color = '#2ed573';
            }

            // é«˜äº®å½“å‰å¸§
            frameCards.forEach(card => {
                const cardTime = parseFloat(card.dataset.time);
                if (Math.abs(currentTime - cardTime) < 1) {
                    card.classList.add('active');
                } else {
                    card.classList.remove('active');
                }
            });
        });

        // ç‚¹å‡»å¸§å¡ç‰‡è·³è½¬
        function seekTo(time) {
            video.currentTime = time;
            video.play();
        }
    </script>
</body>
</html>
